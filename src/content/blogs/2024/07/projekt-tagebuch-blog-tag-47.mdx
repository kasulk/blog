---
title: Projekt-Tagebuch Blog, Tag 47
pubDate: 2024-07-17
description: F√ºr Heute hatte ich mir vorgenommen "schnell" Plasmaspenden in die SupportPage einzubinden. Genauer, die "Spenden werben Spender"-Aktion. So kannst du etwas Gutes tun UND etwas Gutes tun! Wenn dich interessiert wie, hier steht‚Äôs geschrieben.
category: coden
tags:
series: projekt-tagebuch blog
vgWortCode: f686d919438640f1b68397a8e3bcedf6
---

<DateFormatter date={pubDate} weekday />

**Wochen-Ziele:**

- [ ] Blog-Projekt-Tagebuch (Mai) in den Blog uploaden

**Tages-Ziele:**

- [x] ~[Plasma spenden in die SupportPage einbinden](#plasma-spenden-in-die-supportpage)~
- [ ] Pagination einf√ºgen

---

## Plasma spenden in die SupportPage

F√ºr Heute hatte ich mir vorgenommen "schnell" [Plasmaspenden](/support#plasma-spenden) in die [`SupportPage`](/support) einzubinden. Genauer: Die "Spenden werben Spender"-Aktion. So kannst du etwas Gutes tun UND etwas Gutes tun! Wenn dich interessiert wie, [hier](/support#plasma-spenden) steht‚Äôs geschrieben.

Das Ganze hat sich wieder l√§nger hingezogen als erwartet. Das lag an den coolen Features, die ich mir f√ºr diesen Abschnitt auf der [`SupportPage`](/support) ausgedacht hatte. Die oben genannte Aktion gibt es bei CSL n√§mlich leider nicht dauerhauft, sondern immer nur nach Bedarf. D.h., ich muss sie st√§ndig aktuell halten.

Um das so angenehm wie m√∂glich zu gestalten, habe ich mir folgende Gimmicks ausgeknobelt:

1. individueller Text und farbige Hinterlegung je nach Aktualit√§t der laufenden Aktion
1. automatisches Last-Modified-Datum

### Dynamischer Text und Formattierung

Da eine laufende Aktion auslaufen kann, sollte der User darauf hingewiesen werden, ob die aktuell angezeigte Aktion noch aktuell ist. Dies soll durch individuellen Text und eine farbige Hinterlegung passieren.

Da der Blog im Kern ein statischer ist, er wird beim Build-Prozess gerendert (`SSG`), muss ich einen Weg finden die Dynamik in eine statische Seite einzubinden. Die entsprechende Komponente kann also nicht `SSG` sein, sondern muss eine Client-Komponente sein. Das wird spannend.

Soweit erst mal der Plan f√ºr die Dynamik. Weiter bin ich hier noch nicht gekommen. Zuerst hab ich mich um das automatische Last-Modified-Datum gek√ºmmert.

### Automatisches Last-Modified-Datum

Wie bei den anderen Affiliate-Links auch, kommen die variablen Daten f√ºr die [Plasma-Spenden](/support#plasma-spenden) und Aktionen in eine globale Datei. Von da aus kann ich die Daten zentral √§ndern ohne mir √ºberall auf den Seiten die richtigen Stellen im `HTML` raussuchen zu m√ºssen.

Damit der User die Aktualit√§t der Daten einsch√§tzen kann, hab ich f√ºr jeden Affiliate-Link ein Datum f√ºr die letzte vorgenomme √Ñnderung vorgesehen. Das Problem ist hierbei, dass ich bei jeder √Ñnderung auch dieses Datum anfassen muss. Hab ich nat√ºrlich keinen Bock drauf.

Also warum nicht einfach das Datum der letzten √Ñnderung an der Datei auslesen lassen?! Einfach aber genial, gelle?!. Hier die Funktion dazu:

```ts
// src/lib/utils/getLastModifiedDateOfFile.ts
import fs from "fs";
import path from "path";

export function getLastModifiedDateOfFile(filePath: string): Date | null {
  try {
    const fullPath = path.resolve(process.cwd(), filePath);
    const stats = fs.statSync(fullPath);
    return stats.mtime;
  } catch (error) {
    console.error("Error getting file stats:", error);
    return null;
  }
}
```

Und der Knaller: **Es funktioniert!** ü•≥

## Feedback

<Accordion>
Schreib mir!

<SocialLinks emailSubject={`Frage zu ${title}`} />

</Accordion>
